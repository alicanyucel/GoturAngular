import { Directive, EventEmitter, Input, Output } from '@angular/core';
import { LeafletDirectiveWrapper } from '../../core/leaflet.directive.wrapper';
import { LeafletControlLayersWrapper } from './leaflet-control-layers.wrapper';
import { LeafletControlLayersConfig } from './leaflet-control-layers-config.model';
import * as i0 from "@angular/core";
import * as i1 from "../../core/leaflet.directive";
/**
 * Layers Control
 *
 * This directive is used to configure the layers control. The input accepts an object with two
 * key-value maps of layer name -> layer. Mutable changes are detected. On changes, a differ is
 * used to determine what changed so that layers are appropriately added or removed.
 *
 * To specify which layer to show as the 'active' baselayer, you will want to add it to the map
 * using the layers directive. Otherwise, the last one it sees will be used.
 */
class LeafletLayersControlDirective {
    set layersControlConfig(v) {
        // Validation/init stuff
        if (null == v) {
            v = new LeafletControlLayersConfig();
        }
        if (null == v.baseLayers) {
            v.baseLayers = {};
        }
        if (null == v.overlays) {
            v.overlays = {};
        }
        // Store the value
        this.layersControlConfigValue = v;
        // Update the map
        this.updateLayers();
    }
    get layersControlConfig() {
        return this.layersControlConfigValue;
    }
    constructor(leafletDirective, differs, zone) {
        this.differs = differs;
        this.zone = zone;
        this.layersControlReady = new EventEmitter();
        this.leafletDirective = new LeafletDirectiveWrapper(leafletDirective);
        this.controlLayers = new LeafletControlLayersWrapper(this.zone, this.layersControlReady);
        // Generate differs
        this.baseLayersDiffer = this.differs.find({}).create();
        this.overlaysDiffer = this.differs.find({}).create();
    }
    ngOnInit() {
        // Init the map
        this.leafletDirective.init();
        // Set up control outside of angular to avoid change detection when using the control
        this.zone.runOutsideAngular(() => {
            // Set up all the initial settings
            this.controlLayers
                .init({}, this.layersControlOptions)
                .addTo(this.leafletDirective.getMap());
        });
        this.updateLayers();
    }
    ngOnDestroy() {
        this.layersControlConfig = { baseLayers: {}, overlays: {} };
        this.controlLayers.getLayersControl().remove();
    }
    ngDoCheck() {
        this.updateLayers();
    }
    updateLayers() {
        const map = this.leafletDirective.getMap();
        const layersControl = this.controlLayers.getLayersControl();
        if (null != map && null != layersControl) {
            // Run the baselayers differ
            if (null != this.baseLayersDiffer && null != this.layersControlConfigValue.baseLayers) {
                const changes = this.baseLayersDiffer.diff(this.layersControlConfigValue.baseLayers);
                this.controlLayers.applyBaseLayerChanges(changes);
            }
            // Run the overlays differ
            if (null != this.overlaysDiffer && null != this.layersControlConfigValue.overlays) {
                const changes = this.overlaysDiffer.diff(this.layersControlConfigValue.overlays);
                this.controlLayers.applyOverlayChanges(changes);
            }
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.0.1", ngImport: i0, type: LeafletLayersControlDirective, deps: [{ token: i1.LeafletDirective }, { token: i0.KeyValueDiffers }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Directive }); }
    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "16.0.1", type: LeafletLayersControlDirective, selector: "[leafletLayersControl]", inputs: { layersControlConfig: ["leafletLayersControl", "layersControlConfig"], layersControlOptions: ["leafletLayersControlOptions", "layersControlOptions"] }, outputs: { layersControlReady: "leafletLayersControlReady" }, ngImport: i0 }); }
}
export { LeafletLayersControlDirective };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.0.1", ngImport: i0, type: LeafletLayersControlDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[leafletLayersControl]'
                }]
        }], ctorParameters: function () { return [{ type: i1.LeafletDirective }, { type: i0.KeyValueDiffers }, { type: i0.NgZone }]; }, propDecorators: { layersControlConfig: [{
                type: Input,
                args: ['leafletLayersControl']
            }], layersControlOptions: [{
                type: Input,
                args: ['leafletLayersControlOptions']
            }], layersControlReady: [{
                type: Output,
                args: ['leafletLayersControlReady']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGVhZmxldC1jb250cm9sLWxheWVycy5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtbGVhZmxldC9zcmMvbGliL2xheWVycy9jb250cm9sL2xlYWZsZXQtY29udHJvbC1sYXllcnMuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTixTQUFTLEVBQVcsWUFBWSxFQUFFLEtBQUssRUFDdkMsTUFBTSxFQUNOLE1BQU0sZUFBZSxDQUFDO0FBS3ZCLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQy9FLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQy9FLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLHVDQUF1QyxDQUFDOzs7QUFHbkY7Ozs7Ozs7OztHQVNHO0FBQ0gsTUFHYSw2QkFBNkI7SUFTekMsSUFDSSxtQkFBbUIsQ0FBQyxDQUE2QjtRQUVwRCx3QkFBd0I7UUFDeEIsSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFO1lBQUUsQ0FBQyxHQUFHLElBQUksMEJBQTBCLEVBQUUsQ0FBQztTQUFFO1FBQ3hELElBQUksSUFBSSxJQUFJLENBQUMsQ0FBQyxVQUFVLEVBQUU7WUFBRSxDQUFDLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBQ2hELElBQUksSUFBSSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUU7WUFBRSxDQUFDLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztTQUFFO1FBRTVDLGtCQUFrQjtRQUNsQixJQUFJLENBQUMsd0JBQXdCLEdBQUcsQ0FBQyxDQUFDO1FBRWxDLGlCQUFpQjtRQUNqQixJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFFckIsQ0FBQztJQUNELElBQUksbUJBQW1CO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLHdCQUF3QixDQUFDO0lBQ3RDLENBQUM7SUFT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OzBKQVdJLG1CQUFtQjtzQkFEdEIsS0FBSzt1QkFBQyxzQkFBc0I7Z0JBbUJTLG9CQUFvQjtzQkFBekQsS0FBSzt1QkFBQyw2QkFBNkI7Z0JBRUMsa0JBQWtCO3NCQUF0RCxNQUFNO3VCQUFDLDJCQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdERpcmVjdGl2ZSwgRG9DaGVjaywgRXZlbnRFbWl0dGVyLCBJbnB1dCwgS2V5VmFsdWVEaWZmZXIsIEtleVZhbHVlRGlmZmVycywgTmdab25lLCBPbkRlc3Ryb3ksIE9uSW5pdCxcblx0T3V0cHV0XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBDb250cm9sLCBMYXllciB9IGZyb20gJ2xlYWZsZXQnO1xuXG5pbXBvcnQgeyBMZWFmbGV0RGlyZWN0aXZlIH0gZnJvbSAnLi4vLi4vY29yZS9sZWFmbGV0LmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBMZWFmbGV0RGlyZWN0aXZlV3JhcHBlciB9IGZyb20gJy4uLy4uL2NvcmUvbGVhZmxldC5kaXJlY3RpdmUud3JhcHBlcic7XG5pbXBvcnQgeyBMZWFmbGV0Q29udHJvbExheWVyc1dyYXBwZXIgfSBmcm9tICcuL2xlYWZsZXQtY29udHJvbC1sYXllcnMud3JhcHBlcic7XG5pbXBvcnQgeyBMZWFmbGV0Q29udHJvbExheWVyc0NvbmZpZyB9IGZyb20gJy4vbGVhZmxldC1jb250cm9sLWxheWVycy1jb25maWcubW9kZWwnO1xuXG5cbi8qKlxuICogTGF5ZXJzIENvbnRyb2xcbiAqXG4gKiBUaGlzIGRpcmVjdGl2ZSBpcyB1c2VkIHRvIGNvbmZpZ3VyZSB0aGUgbGF5ZXJzIGNvbnRyb2wuIFRoZSBpbnB1dCBhY2NlcHRzIGFuIG9iamVjdCB3aXRoIHR3b1xuICoga2V5LXZhbHVlIG1hcHMgb2YgbGF5ZXIgbmFtZSAtPiBsYXllci4gTXV0YWJsZSBjaGFuZ2VzIGFyZSBkZXRlY3RlZC4gT24gY2hhbmdlcywgYSBkaWZmZXIgaXNcbiAqIHVzZWQgdG8gZGV0ZXJtaW5lIHdoYXQgY2hhbmdlZCBzbyB0aGF0IGxheWVycyBhcmUgYXBwcm9wcmlhdGVseSBhZGRlZCBvciByZW1vdmVkLlxuICpcbiAqIFRvIHNwZWNpZnkgd2hpY2ggbGF5ZXIgdG8gc2hvdyBhcyB0aGUgJ2FjdGl2ZScgYmFzZWxheWVyLCB5b3Ugd2lsbCB3YW50IHRvIGFkZCBpdCB0byB0aGUgbWFwXG4gKiB1c2luZyB0aGUgbGF5ZXJzIGRpcmVjdGl2ZS4gT3RoZXJ3aXNlLCB0aGUgbGFzdCBvbmUgaXQgc2VlcyB3aWxsIGJlIHVzZWQuXG4gKi9cbkBEaXJlY3RpdmUoe1xuXHRzZWxlY3RvcjogJ1tsZWFmbGV0TGF5ZXJzQ29udHJvbF0nXG59KVxuZXhwb3J0IGNsYXNzIExlYWZsZXRMYXllcnNDb250cm9sRGlyZWN0aXZlXG5cdGltcGxlbWVudHMgRG9DaGVjaywgT25EZXN0cm95LCBPbkluaXQge1xuXG5cdC8vIENvbnRyb2wgTGF5ZXJzIENvbmZpZ3VyYXRpb25cblx0bGF5ZXJzQ29udHJvbENvbmZpZ1ZhbHVlOiBMZWFmbGV0Q29udHJvbExheWVyc0NvbmZpZztcblxuXHRiYXNlTGF5ZXJzRGlmZmVyOiBLZXlWYWx1ZURpZmZlcjxzdHJpbmcsIExheWVyPjtcblx0b3ZlcmxheXNEaWZmZXI6IEtleVZhbHVlRGlmZmVyPHN0cmluZywgTGF5ZXI+O1xuXG5cdEBJbnB1dCgnbGVhZmxldExheWVyc0NvbnRyb2wnKVxuXHRzZXQgbGF5ZXJzQ29udHJvbENvbmZpZyh2OiBMZWFmbGV0Q29udHJvbExheWVyc0NvbmZpZykge1xuXG5cdFx0Ly8gVmFsaWRhdGlvbi9pbml0IHN0dWZmXG5cdFx0aWYgKG51bGwgPT0gdikgeyB2ID0gbmV3IExlYWZsZXRDb250cm9sTGF5ZXJzQ29uZmlnKCk7IH1cblx0XHRpZiAobnVsbCA9PSB2LmJhc2VMYXllcnMpIHsgdi5iYXNlTGF5ZXJzID0ge307IH1cblx0XHRpZiAobnVsbCA9PSB2Lm92ZXJsYXlzKSB7IHYub3ZlcmxheXMgPSB7fTsgfVxuXG5cdFx0Ly8gU3RvcmUgdGhlIHZhbHVlXG5cdFx0dGhpcy5sYXllcnNDb250cm9sQ29uZmlnVmFsdWUgPSB2O1xuXG5cdFx0Ly8gVXBkYXRlIHRoZSBtYXBcblx0XHR0aGlzLnVwZGF0ZUxheWVycygpO1xuXG5cdH1cblx0Z2V0IGxheWVyc0NvbnRyb2xDb25maWcoKTogTGVhZmxldENvbnRyb2xMYXllcnNDb25maWcge1xuXHRcdHJldHVybiB0aGlzLmxheWVyc0NvbnRyb2xDb25maWdWYWx1ZTtcblx0fVxuXG5cdEBJbnB1dCgnbGVhZmxldExheWVyc0NvbnRyb2xPcHRpb25zJykgbGF5ZXJzQ29udHJvbE9wdGlvbnM6IGFueTtcblxuXHRAT3V0cHV0KCdsZWFmbGV0TGF5ZXJzQ29udHJvbFJlYWR5JykgbGF5ZXJzQ29udHJvbFJlYWR5ID0gbmV3IEV2ZW50RW1pdHRlcjxDb250cm9sLkxheWVycz4oKTtcblxuXHRwcml2YXRlIGNvbnRyb2xMYXllcnM6IExlYWZsZXRDb250cm9sTGF5ZXJzV3JhcHBlcjtcblx0cHJpdmF0ZSBsZWFmbGV0RGlyZWN0aXZlOiBMZWFmbGV0RGlyZWN0aXZlV3JhcHBlcjtcblxuXHRjb25zdHJ1Y3RvcihsZWFmbGV0RGlyZWN0aXZlOiBMZWFmbGV0RGlyZWN0aXZlLCBwcml2YXRlIGRpZmZlcnM6IEtleVZhbHVlRGlmZmVycywgcHJpdmF0ZSB6b25lOiBOZ1pvbmUpIHtcblx0XHR0aGlzLmxlYWZsZXREaXJlY3RpdmUgPSBuZXcgTGVhZmxldERpcmVjdGl2ZVdyYXBwZXIobGVhZmxldERpcmVjdGl2ZSk7XG5cdFx0dGhpcy5jb250cm9sTGF5ZXJzID0gbmV3IExlYWZsZXRDb250cm9sTGF5ZXJzV3JhcHBlcih0aGlzLnpvbmUsIHRoaXMubGF5ZXJzQ29udHJvbFJlYWR5KTtcblxuXHRcdC8vIEdlbmVyYXRlIGRpZmZlcnNcblx0XHR0aGlzLmJhc2VMYXllcnNEaWZmZXIgPSB0aGlzLmRpZmZlcnMuZmluZCh7fSkuY3JlYXRlPHN0cmluZywgTGF5ZXI+KCk7XG5cdFx0dGhpcy5vdmVybGF5c0RpZmZlciA9IHRoaXMuZGlmZmVycy5maW5kKHt9KS5jcmVhdGU8c3RyaW5nLCBMYXllcj4oKTtcblxuXHR9XG5cblx0bmdPbkluaXQoKSB7XG5cblx0XHQvLyBJbml0IHRoZSBtYXBcblx0XHR0aGlzLmxlYWZsZXREaXJlY3RpdmUuaW5pdCgpO1xuXG5cdFx0Ly8gU2V0IHVwIGNvbnRyb2wgb3V0c2lkZSBvZiBhbmd1bGFyIHRvIGF2b2lkIGNoYW5nZSBkZXRlY3Rpb24gd2hlbiB1c2luZyB0aGUgY29udHJvbFxuXHRcdHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG5cblx0XHRcdC8vIFNldCB1cCBhbGwgdGhlIGluaXRpYWwgc2V0dGluZ3Ncblx0XHRcdHRoaXMuY29udHJvbExheWVyc1xuXHRcdFx0XHQuaW5pdCh7fSwgdGhpcy5sYXllcnNDb250cm9sT3B0aW9ucylcblx0XHRcdFx0LmFkZFRvKHRoaXMubGVhZmxldERpcmVjdGl2ZS5nZXRNYXAoKSk7XG5cblx0XHR9KTtcblxuXHRcdHRoaXMudXBkYXRlTGF5ZXJzKCk7XG5cblx0fVxuXG5cdG5nT25EZXN0cm95KCkge1xuXHRcdHRoaXMubGF5ZXJzQ29udHJvbENvbmZpZyA9IHsgYmFzZUxheWVyczoge30sIG92ZXJsYXlzOiB7fSB9O1xuXHRcdHRoaXMuY29udHJvbExheWVycy5nZXRMYXllcnNDb250cm9sKCkucmVtb3ZlKCk7XG5cdH1cblxuXHRuZ0RvQ2hlY2soKSB7XG5cdFx0dGhpcy51cGRhdGVMYXllcnMoKTtcblx0fVxuXG5cdHByb3RlY3RlZCB1cGRhdGVMYXllcnMoKSB7XG5cblx0XHRjb25zdCBtYXAgPSB0aGlzLmxlYWZsZXREaXJlY3RpdmUuZ2V0TWFwKCk7XG5cdFx0Y29uc3QgbGF5ZXJzQ29udHJvbCA9IHRoaXMuY29udHJvbExheWVycy5nZXRMYXllcnNDb250cm9sKCk7XG5cblx0XHRpZiAobnVsbCAhPSBtYXAgJiYgbnVsbCAhPSBsYXllcnNDb250cm9sKSB7XG5cblx0XHRcdC8vIFJ1biB0aGUgYmFzZWxheWVycyBkaWZmZXJcblx0XHRcdGlmIChudWxsICE9IHRoaXMuYmFzZUxheWVyc0RpZmZlciAmJiBudWxsICE9IHRoaXMubGF5ZXJzQ29udHJvbENvbmZpZ1ZhbHVlLmJhc2VMYXllcnMpIHtcblx0XHRcdFx0Y29uc3QgY2hhbmdlcyA9IHRoaXMuYmFzZUxheWVyc0RpZmZlci5kaWZmKHRoaXMubGF5ZXJzQ29udHJvbENvbmZpZ1ZhbHVlLmJhc2VMYXllcnMpO1xuXHRcdFx0XHR0aGlzLmNvbnRyb2xMYXllcnMuYXBwbHlCYXNlTGF5ZXJDaGFuZ2VzKGNoYW5nZXMpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSdW4gdGhlIG92ZXJsYXlzIGRpZmZlclxuXHRcdFx0aWYgKG51bGwgIT0gdGhpcy5vdmVybGF5c0RpZmZlciAmJiBudWxsICE9IHRoaXMubGF5ZXJzQ29udHJvbENvbmZpZ1ZhbHVlLm92ZXJsYXlzKSB7XG5cdFx0XHRcdGNvbnN0IGNoYW5nZXMgPSB0aGlzLm92ZXJsYXlzRGlmZmVyLmRpZmYodGhpcy5sYXllcnNDb250cm9sQ29uZmlnVmFsdWUub3ZlcmxheXMpO1xuXHRcdFx0XHR0aGlzLmNvbnRyb2xMYXllcnMuYXBwbHlPdmVybGF5Q2hhbmdlcyhjaGFuZ2VzKTtcblx0XHRcdH1cblxuXHRcdH1cblxuXHR9XG5cbn1cbiJdfQ==